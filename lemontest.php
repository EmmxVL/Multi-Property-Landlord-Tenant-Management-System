<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);

// === Include Database Class ===
$dbPath = __DIR__ . "/PHP/dbConnect.php";

if (file_exists($dbPath)) {
    echo "üîç Including: $dbPath<br>";
    require_once $dbPath;
    echo "‚úÖ dbConnect.php loaded successfully<br><br>";
} else {
    die("‚ùå Error: dbConnect.php not found at $dbPath");
}

// === Test Supabase Connection ===
try {
    $db = new Database();
    $table = "user_tbl";

    echo "‚úÖ File loaded, testing Supabase connection...<br>";
    echo "üîç Checking table: $table<br><br>";

    $response = $db->select($table);

    echo "HTTP Status: " . $response["status"] . "<br><br>";

    if ($response["status"] == 200) {
        echo "‚úÖ Query successful!<br><br>";
        echo "<pre>";
        print_r($response["data"]);
        echo "</pre>";
    } else {
        echo "‚ö†Ô∏è Error fetching data from $table (HTTP {$response["status"]})<br><br>";
        echo "<pre>";
        print_r($response["data"]);
        echo "</pre>";
    }

} catch (Throwable $e) {
    echo "‚ùå Fatal Error: " . $e->getMessage();
}
?>
